#include <iostream>
#include <algorithm>
#include <string>
using namespace std;

#define ll long long

int tetromino[7][4][4][2]={{{{0,0},{1,0},{2,0},{3,0}},
                            {{0,0},{0,1},{0,2},{0,3}}},//I미노
                           {{{0,0},{1,0},{0,1},{1,1}}},//O미노
                           {{{0,0},{0,1},{0,2},{1,2}},
                            {{0,1},{1,1},{2,1},{2,0}},
                            {{0,0},{1,0},{1,1},{1,2}},
                            {{0,0},{1,0},{2,0},{0,1}}},//L미노
                           {{{1,0},{0,1},{1,1},{2,0}},
                            {{0,0},{0,1},{1,1},{1,2}}},//S미노
                           {{{0,0},{1,0},{2,0},{1,1}},
                            {{0,0},{0,1},{0,2},{1,1}},
                            {{1,0},{0,1},{1,1},{2,1}},
                            {{1,0},{0,1},{1,1},{1,2}}},//T미노
                           {{{1,0},{1,1},{1,2},{0,2}},
                            {{0,0},{0,1},{1,1},{2,1}},
                            {{0,0},{1,0},{0,1},{0,2}},
                            {{0,0},{1,0},{2,0},{2,1}}},//J미노
                           {{{0,0},{1,0},{1,1},{2,1}},
                            {{1,0},{1,1},{0,1},{0,2}}}//Z미노
                            };
int spin[7]={2,1,4,2,4,4,2},dist[7][4][2]={{{3,0},{0,3}},
                                        {{1,1}},
                                        {{1,2},{2,1},{1,2},{2,1}},
                                        {{2,1},{1,2}},
                                        {{2,1},{1,2},{2,1},{1,2}},
                                        {{1,2},{2,1},{1,2},{2,1}},
                                        {{2,1},{1,2}}
                                        };
int n,m,paper[500][500]={0},ans=0;

int main(){
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    cout.tie(NULL);

    cin>>n>>m;

    for(int i=0;i<n;++i){
        for(int j=0;j<m;++j){
            cin>>paper[i][j];
        }
    }

    for(int i=0;i<7;++i){
        for(int j=0;j<spin[i];++j){
            for(int y=0;y<n-dist[i][j][1];++y){
                for(int x=0;x<m-dist[i][j][0];++x){
                    int tmp=0;
                    for(int k=0;k<4;++k){
                        tmp+=paper[y+tetromino[i][j][k][1]][x+tetromino[i][j][k][0]];
                    }
                    ans=max(ans,tmp);
                }
            }
        }
    }

    cout<<ans;

    return 0;
}